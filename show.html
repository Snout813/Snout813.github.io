<!DOCTYPE html>
<html>
<head>
  <title>저장된 정보 보기</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com"> <!--Noto Sans Korean -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="project.css">
  <title>SLE | IT 개발 동아리</title>
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-analytics.js"></script>
  <script src = "project.js"></script>
  <script src ="typing.js"></script>
  <meta charset="uft8">
</head>
<body>

    <div class="header">
        <div class="logo">
            <a href="index.html">
                <img src="image/logo.png" weigt="71px" height="53px">
            </a>
        </div>
        <ul class="nav">
            <li><a href="index.html">HOME</a></li>
            <li><a href="project.html">PROJECT</a></li>
            <li><a href="recruit.html">RECRUIT</a></li>
            <li><a href="login.html" id = "loginmenu"><span id ="loginText">LogIn</span></a></li>
        </ul>
    </div>
    <div class="first">
        <div class="main">
            <div class="intro">
                <h3 class="typing">
                </h3>
            </div>
        </div>
    </div>
    <div class = "second">
        <div class="menu">
            <li class="menu-item" data-filter="*">
                <a>ALL</a>
            </li>
            <li class="menu-item" data-filter ="2023-1">
                <a>2023-1</a>
            </li>
            <li class="menu-item" data-filter = "2022-2">
                <a>2022-2</a>
            </li>
            <li class="menu-item" data-filter = "2022-1">
                <a>2022-1</a>
            </li>
            <li class="menu-item" data-filete="2021-2">
                <a>2021-2</a>
            </li>
        </div>
    </div>
    <div class="writeButton">
        <button class ="write">
            글 쓰기
        </button>

  <h1>저장된 정보</h1>
  <div id="dataList"></div>

  <!-- Firebase SDK 로드 -->
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js"></script>

  <script type="module">
    // Firebase 프로젝트 구성으로 대체합니다.
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore.js";
    
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyBSebTrjnGqnwZmYe4MvCCK02nhvTyDB2Q",
        authDomain: "sle-web-64734.firebaseapp.com",
        projectId: "sle-web-64734",
        storageBucket: "sle-web-64734.appspot.com",
        messagingSenderId: "22889544223",
        appId: "1:22889544223:web:041ca634e846ee42eb332a", 
        measurementId: "G-ML4269WMVH"
    };
    
    // Firebase 초기화
    const app = initializeApp(firebaseConfig);
    // Firestore 데이터베이스에 대한 참조를 가져옵니다.
    const db = getFirestore(app); 
    
    // 저장된 정보를 가져와서 화면에 표시하는 함수
    async function displayData() {
      const dataListDiv = document.getElementById('dataList');
      
      try {
        // "users" 컬렉션에서 모든 문서 가져오기
        const querySnapshot = await getDocs(collection(db, "users"));
        
        // 가져온 문서들을 화면에 표시
        querySnapshot.forEach((doc) => {
            const data = doc.data();
            const itemDiv = document.createElement('div');
            itemDiv.innerHTML = `
            <div class = "third">
                <div class=card>
                    <div class = "img">
                        <a href="project/project1.html">
                            <img src ="image/project.png" alt="">
                        </a>
                    </div>
                    <div class = "text">
                        <<div class="first_line">
                        <a href="#">${data.title}</a>
                        <p class="date">${data.year}-${data.semester}</p>
                        </div>
                        <div class="second_line">
                        <p class="tag">#${data.team} #${data.projectType}</p>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
          `;
            dataListDiv.appendChild(itemDiv);
        });
      } catch (error) {
        console.error("Error fetching documents: ", error);
      }
    }
    
    // 페이지 로드 시 저장된 정보 표시
    document.addEventListener('DOMContentLoaded', () => {
      displayData();
    });
  </script>
</body>
</html>
